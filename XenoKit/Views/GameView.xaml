<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             xmlns:local="clr-namespace:XenoKit.Controls"
             xmlns:XenoMoveEditor="clr-namespace:XenoKit" x:Class="XenoKit.Controls.GameView"
             xmlns:engine="clr-namespace:XenoKit.Engine"
             mc:Ignorable="d" 
             xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
            d:DesignHeight="520" d:DesignWidth="500" x:Name="UserControl">
    <Grid Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="90"/>
        </Grid.RowDefinitions>
        <engine:Viewport Grid.Row="1" Margin="0,5,0,0" x:Name="monoGame" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
        <StackPanel Grid.Row="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="10,15,0,0" Visibility="{Binding ElementName=UserControl, Path=OverlayVisibility}">
            <TextBlock x:Name="standardOverlay" TextWrapping="Wrap" Text="{Binding ElementName=UserControl, Path=StandardOverlay}" Foreground="Magenta"/>
            <TextBlock x:Name="vfxOverlay" TextWrapping="Wrap" Text="{Binding ElementName=UserControl, Path=VfxOverlay}" Foreground="Magenta"/>
            <TextBlock x:Name="debugOverlay" TextWrapping="Wrap" Text="{Binding ElementName=UserControl, Path=DebugOverlay}" Foreground="Magenta"/>
        </StackPanel>

        <Grid Grid.Row="0">
            <StackPanel Orientation="Horizontal" Margin="10, 0">

                <Button ToolTip="Reset the camera to its original state&#x0a;&#x0a;Hotkey: Left Alt + R" HorizontalAlignment="Left" Click="ResetCamera_Click" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25">
                    <iconPacks:PackIconMaterialLight Kind="Camera" />
                </Button>
                <Button Margin="5,0,0,0" ToolTip="Toggle the scene grid and axis&#x0a;&#x0a;Hotkey: Left Alt + G" HorizontalAlignment="Left" Click="ToggleGrid_Click" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25">
                    <iconPacks:PackIconMaterialLight Kind="Grid" />
                </Button>
                <Button Margin="5,0,0,0" ToolTip="Toggle viewport overlays" HorizontalAlignment="Left" Click="GameOverlayToggle_Click" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25">
                    <iconPacks:PackIconModern Kind="Information" />
                </Button>
                <Separator Margin="-5,0,-5,0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="5" Width="20" RenderTransformOrigin="0.5,0.5">
                    <Separator.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="90"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Separator.RenderTransform>
                </Separator>

                <Button x:Name="translateButton" IsEnabled="{Binding ElementName=UserControl, Path=TranslateAllowed}" ToolTip="Use the translate transform tool.&#x0a;&#x0a;Hotkey: R" HorizontalAlignment="Left" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25" Command="{Binding ElementName=UserControl, Path=TransformGizmoChangeCommand}" CommandParameter="0">
                    <iconPacks:PackIconLucide Kind="Move3d" />
                </Button>
                <Button x:Name="rotateButton" IsEnabled="{Binding ElementName=UserControl, Path=RotateAllowed}" ToolTip="Use the rotate transform tool.&#x0a;&#x0a;Hotkey: T" Margin="5,0,0,0" HorizontalAlignment="Left" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25" Command="{Binding ElementName=UserControl, Path=TransformGizmoChangeCommand}" CommandParameter="1">
                    <iconPacks:PackIconLucide Kind="Rotate3d" />
                </Button>
                <Button x:Name="scaleButton" IsEnabled="{Binding ElementName=UserControl, Path=ScaleAllowed}" ToolTip="Use the scale transform tool.&#x0a;&#x0a;Hotkey: Y" Margin="5,0,0,0" HorizontalAlignment="Left" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25" Command="{Binding ElementName=UserControl, Path=TransformGizmoChangeCommand}" CommandParameter="2">
                    <iconPacks:PackIconLucide Kind="Scale3d" />
                </Button>
                <Button x:Name="noneButton" ToolTip="Disable transform tool.&#x0a;&#x0a;Hotkey: U or ESC" Margin="5,0,0,0" HorizontalAlignment="Left" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25" Command="{Binding ElementName=UserControl, Path=TransformGizmoChangeCommand}" CommandParameter="3">
                    <TextBlock Text="N" FontWeight="Bold"/>
                </Button>
                <Separator Margin="-5,0,-5,0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="5" Width="20" RenderTransformOrigin="0.5,0.5">
                    <Separator.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="90"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Separator.RenderTransform>
                </Separator>

                <!-- Model Editor specific elements -->
                <StackPanel Visibility="{Binding ElementName=UserControl, Path=ModelEditorVisibility}" HorizontalAlignment="Left" Orientation="Horizontal">
                    <Button x:Name="boundingBoxButton" Click="boundingBoxButton_Click"  ToolTip="Toggle visibility of the selection bounding box and mesh wireframe highlighing in the Model Editor." HorizontalAlignment="Left" Width="25" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="25">
                        <iconPacks:PackIconLucide Kind="Box" />
                    </Button>
                    <ComboBox HorizontalAlignment="Left" Height="20" Width="100" Margin="5,0,0,0" ToolTip="Set the pivot point used for rotation and scale transformations" SelectedIndex="{Binding ElementName=UserControl, Path=PivotPoint}">
                        <ComboBoxItem Content="Pivot Origin"/>
                        <ComboBoxItem Content="Pivot Center"/>
                    </ComboBox>
                    <ComboBox HorizontalAlignment="Left" Height="20" Width="100" Margin="5,0,0,0" ToolTip="Viewport selection mode" SelectedIndex="{Binding ElementName=UserControl, Path=ViewportSelectionMode}">
                        <ComboBoxItem Content="Model"/>
                        <ComboBoxItem Content="Mesh"/>
                        <ComboBoxItem Content="Submesh"/>
                    </ComboBox>
                    <Separator Margin="-5,0,-5,0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="5" Width="20" RenderTransformOrigin="0.5,0.5">
                        <Separator.RenderTransform>
                            <TransformGroup>
                                <ScaleTransform/>
                                <SkewTransform/>
                                <RotateTransform Angle="90"/>
                                <TranslateTransform/>
                            </TransformGroup>
                        </Separator.RenderTransform>
                    </Separator>
                    
                </StackPanel>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="25"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" HorizontalAlignment="Center" Orientation="Horizontal">
                <Button Click="Play_Click"  Width="27" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="27">
                    <iconPacks:PackIconMaterialLight Kind="{Binding PlayPauseButtonBinding}" />
                </Button>
                <Button  Click="Stop_Click" Margin="5,0,0,0"  Width="27" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="27">
                    <iconPacks:PackIconMaterialLight Kind="Stop" />
                </Button>
                <RepeatButton Command="{Binding ElementName=UserControl, Path=SeekPrevCommand}" Margin="5,0,0,0" Width="27" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="27">
                    <iconPacks:PackIconMaterialLight Kind="SeekPrevious" />
                </RepeatButton>
                <RepeatButton Command="{Binding ElementName=UserControl, Path=SeekNextCommand}" Margin="5,0,0,0" Width="27" Style="{DynamicResource MahApps.Styles.Button.Circle}" Height="27">
                    <iconPacks:PackIconMaterialLight Kind="SeekNext" />
                </RepeatButton>
            </StackPanel>

            <Label Grid.Row="1" VerticalContentAlignment="Center" VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding ElementName=UserControl, Path=CurrentFramePreview}" FontSize="14" Margin="0,0,0,0" Height="37" Width="75"/>
            <Slider Grid.Row="1" Margin="10,0,75,0" Maximum="{Binding ElementName=UserControl, Path=MaxFrameValue}" Value="{Binding ElementName=UserControl, Path=CurrentFrame}" Minimum="0" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" ToolTip="Seek" Cursor="Hand"/>
            <StackPanel Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,0.073" Orientation="Horizontal" Height="24" Width="Auto">
                <CheckBox IsChecked="{Binding ElementName=UserControl, Path=RenderCharacters}" Content="Characters" Height="20" Margin="3, 0" ToolTip="Toggle the visibility of characters."/>
                <CheckBox IsChecked="{Binding ElementName=UserControl, Path=Loop}" Content="Loop" Height="20" Margin="3, 0"/>
                <CheckBox x:Name="bacLoopCheckBox" IsChecked="{Binding ElementName=UserControl, Path=BacLoop}" Content="BAC Loop" Height="20" Margin="3, 0" ToolTip="Toggle loops within Actions (BAC).&#x0a;&#x0a;These are the loops defined in a primary animation or function (0x0 / 0x22) entry."/>
                <CheckBox IsChecked="{Binding ElementName=UserControl, Path=AutoPlay}" Content="Auto Play"  Height="20" ToolTip="Toggle autoplay. If enabled, then items will be auto-played when selected." Margin="3, 0"/>
                <CheckBox x:Name="cameraCheckBox" IsChecked="{Binding ElementName=UserControl, Path=UseCameras}" Content="Cameras"  Height="20" ToolTip="Toggle camera animations." Margin="3, 0" Visibility="Collapsed"/>
                <CheckBox x:Name="bonesCheckBox" IsChecked="{Binding ElementName=UserControl, Path=ShowVisualSkeleton}" Content="Bones" Height="20" ToolTip="Toggle the visual skeleton in the relevant tabs." Margin="3, 0" Visibility="Collapsed"/>
                <CheckBox x:Name="audioCheckBox" IsChecked="{Binding ElementName=UserControl, Path=AudioSimulation}" Content="Sound" Height="20" ToolTip="Toggle audio simulation (does not affect audio previewing)." Margin="3, 0" Visibility="Collapsed"/>
                <CheckBox x:Name="hitboxCheckBox" IsChecked="{Binding ElementName=UserControl, Path=HitboxSimulation}" Content="Hitbox" Height="20" ToolTip="Toggle hitbox simulation (does not affect hitbox previewing when editing a hitbox directly)." Margin="3, 0" Visibility="Collapsed"/>
                <CheckBox x:Name="effectCheckBox" IsChecked="{Binding ElementName=UserControl, Path=VfxSimulation}" Content="Effect" Height="20" ToolTip="Toggle effect previewing." Margin="3, 0" Visibility="Collapsed"/>

            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
